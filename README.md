# cdnnow
Тестовое задание.

<h2>Дано:</h2>
Требуется написать скрипты деплоя на окружение dev и prod в Kubernetes приложения.<br>
Результат выполнения задачи должен быть передан в виде ссылки на github.com или любого другого публичного git репозитория.<br>
Требования к приложению:<br>
1.  Приложение состоит из nginx, php-fpm и единственной страницы index.php:<br>

```
<?php
echo "Hello world!";
```

2.  Файл index.php должен быть в контейнере (т.е. не должен быть подключен из вне).<br>
3.  В качестве платформы для запуска Kubernetes рекомендуется использовать minikube.<br>
4.  Страница должна открываться по адресу “/” (т.е. не “/index.php”).<br>
5.  Вы можете выбрать инструменты для организации деплоя на ваше усмотрение.<br>
<br>
<b>Решение.</b>

Нормально выстроенная цепь прохождения кода выглядит следующим образом:
Разработчик написал код и сделал git push в настроенный локальный gitlab.<br>
В гитлабе срабатывает раннер и запускает последовательность, которая может включать в себя следующие действия:<br>
1. Подготовка окружения для сборки образов.
2. Передача подготовленных данных в машину для сборки образов (или там же?).
3. Сборка образов согласно заданным инструкциям. При провале зачистка окружения и завершение процесса.
4. Прогон ряда автоматических тестов с целью получить на выходе exit 0. При провале зачистка окружения и завершение процесса.
5. Отправка образа в реестр образов.
6. Зачистка окружения.
7. Отправка оповещения на ревью кода с целью получения одобрения.
8. Запуск группы образов в среде stage.
9. Запуск образов в среде production.

Обращаю внимание на необходимость произвести зачистку окружения в машине сборки образов в любом случае, вне зависимости от последующих результатов.

Cкрипт <b>cdnnow-deploy.compose.sh</b> работает с использованием docker-compose.</br>
Сервис доступен по адресу http://cdnnow.</br>
</br>
Скрипт <b>cdnnow-deploy.minikube.sh</b> работает с использованием docker-compose и minicube.</br>
Откроется страница в браузере. Нужно в файле hosts прописать соответствие этому ip имени cdnnow и в строке адреса заменить ip на cdnnow. Нужно получить http://cdnnow:port
